function C4AW_UTC(){this.UTCGetNow=function(){try{var t=new Date;return Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}catch(t){oC4AW_Widget.SendJSError("UTCGetNow",t)}},this.UTCIsValid=function(t){try{return!isNaN(t)&&2147483647<=parseInt(t,10)}catch(t){oC4AW_Widget.SendJSError("UTCIsValid",t)}},this.UTCDiffernce=function(t){try{var e=0;if(!this.UTCIsValid(t))return 99999999;var e=parseInt(t,10),n=this.UTCGetNow();return n<e?99999999:n-e}catch(t){oC4AW_Widget.SendJSError("UTCDiffernce",t)}}}function C4AW_WidgetProactive(t,e,n,a,i,r,o){this.Workflow=t,t=e.toLowerCase(),t=t.replace("https://",""),t=t.replace("http://",""),this.URLContains=t=t.replace("www.",""),this.ExactMatch=n,this.DelayOpen=a,this.DelayException=i,this.ShowWhenUnavailable=1==r?"Y":"N",this.Identity=o}function C4AW_Widget(){function t(t){var e=t.getAutoProactiveCollection().length;if(0!=e){var n=new C4AW_Cookie;if(n.LoadData(),n.IsEnabled()&&!n.getContDisplayed()&&!(new C4AW_Browser).getIsSmallMobile())for(var a=!1,i=0;i<e;i++){var r=t.getAutoProactiveCollection(),o=window.location.href.toLowerCase(),o=o.replace("https://",""),o=o.replace("http://",""),o=o.replace("www.",""),a=!1;if(1==r[i].ExactMatch?o==r[i].URLContains&&(a=!0):-1!=o.indexOf(r[i].URLContains)&&(a=!0),a){var s=r[i].Workflow,a=r[i].DelayException,c=r[i].Identity,d=r[i].ShowWhenUnavailable;if(lDiff=(new C4AW_UTC).UTCDiffernce(n.getAutoProactiveDTS()),lDiff>1e3*a){setTimeout(function(){var e=s,n=c,a=d,i=new C4AW_Cookie;if(i.LoadData(),!i.getContDisplayed()){var r=new C4AW_UTC;""!=i.getChatStartedDTS()&&3e4>r.UTCDiffernce(i.getChatStartedDTS())||new C4AW_WidgetComms(t).Send("IsProactiveWorkflowAvailable","ProWFGUID="+e+"&Identity="+n+"&ShowWhenUnavailable="+a)}},1e3*r[i].DelayOpen);break}}}}}var e,n,a=new C4AW_WidgetData;this.setAccGUID=function(t){a.setParamAccGUID(t)},this.setWSGUID=function(t){a.setParamWSGUID(t)},this.setWFGUID=function(t){a.setParamWFGUID(t)},this.setIdentity=function(t){a.setParamIdentity(t)},this.setPopupWindowWFGUID=function(t){a.setPopupWindowWFGUID(t)},this.setDockPosition=function(t){a.setDockPosition(t)},this.setBtnStyle=function(t){a.setBtnStyle(t)},this.setBtnStaticURL=function(t){a.setBtnStaticURL(t)},this.setSendJSErrors=function(t){a.setSendJSErrors(t)},this.setUserDefParams=function(t){a.setParamUserDef(t)},this.addAutoProactive=function(t){a.addAutoProactive(t)},this.setBtnWrapperClass=function(t){a.setBtnWrapperClass(t)},this.Initilize=function(){e=new C4AW_WidgetInterface(a),e.Load(),n=new C4AW_WidgetChat(a),t(a)},this.BuildContainer=function(t,n){e.BuildContainer(t,n)},this.BuildIFrame=function(t){e.BuildIFrame(t)},this.ServerDataLoaded=function(){e.ServerDataLoaded()},this.ServerDataLoadedForProactive=function(t,n){e.ServerDataLoadedForProactive(t,n)},this.ChatActive=function(t){n.ChatActive(t)},this.ChatCompleted=function(t){n.ChatCompleted(t)},this.ChatDontExist=function(t){n.ChatDontExist(t)},this.oC4AW_WidgetInterface=e,this.CloseBtnClick=function(){e.CloseBtnClick()},this.PopupBtnClick=function(){e.PopUpChatWindow()},this.SendJSError=function(t,e){new C4AW_WidgetComms(a).SendJSErrorToServer(t,e)}}function C4AW_Browser(){this.getUserAgent=function(){return navigator.userAgent},this.getIsSmallMobile=function(){return!!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&799>=window.innerHeight)}}function C4AW_Cookie(){function t(t,e){try{if(""==e||""==t)return"";var n=t.indexOf(e);if(-1==n)return"";var a=t.indexOf("=",n);if(-1==a)return"";var i=t.indexOf(",",n);return-1==i&&(i=999999),t.substring(a+1,i)}catch(t){return oC4AW_Widget.SendJSError("GetValueFromName",t),""}}var e=!1,n="",a="",i=!1,r="",o="",s="";this.getCookieLoaded=function(){return e},this.getChatEncryptID=function(){return n},this.getChatStartedDTS=function(){return a},this.getContDisplayed=function(){return i},this.getAutoProactiveDTS=function(){return r},this.getAutoProactiveWorkflow=function(){return o},this.getAutoProactiveIdentity=function(){return s},this.setChatEncryptID=function(t){n=t},this.setChatStartedDTS=function(t){a=t},this.setContDisplayed=function(t){i=t},this.setAutoProactiveDTS=function(t){r=t},this.setAutoProactiveWorkflow=function(t){o=t},this.setAutoProactiveIdentity=function(t){s=t},this.IsEnabled=function(){try{return navigator.cookieEnabled}catch(t){return oC4AW_Widget.SendJSError("IsEnabled",t),!1}},this.LoadData=function(){try{var c;t:try{for(var d=document.cookie.split(";"),u=0;u<d.length;u++){for(var h=d[u];" "==h.charAt(0);)h=h.substring(1,h.length);if(0==h.indexOf("C4ATBWid=")){c=h.substring(9,h.length);break t}}c=!1}catch(t){oC4AW_Widget.SendJSError("Cookie_Read",t),c=!1}null!=c?(n=t(c,"ChatEncryptID"),a=t(c,"ChatStartedDTS"),r=t(c,"AutoProactiveDTS"),o=t(c,"AutoProactiveWorkflow"),s=t(c,"AutoProactiveIdentity"),i="true"==t(c,"ContDisplayed"),e=!0):e=!1}catch(t){return oC4AW_Widget.SendJSError("LoadData",t),!1}},this.SaveData=function(){try{var t;t:{try{if(0!=navigator.cookieEnabled){var e="ChatEncryptID="+n+",ChatStartedDTS="+a,e=e+",ContDisplayed="+i+",AutoProactiveDTS="+r,e=e+",AutoProactiveWorkflow="+o,e=e+",AutoProactiveIdentity="+s,c=new Date;c.setTime(c.getTime()+144e5),document.cookie="C4ATBWid="+e+"; expires="+c.toGMTString()+";path=/;",t=!0;break t}}catch(e){oC4AW_Widget.SendJSError("Cookie_Write",e),t=!1;break t}t=void 0}if(!t)return oC4AW_Widget.SendJSError("SaveData","Unable to save to cookie"),!1}catch(t){return oC4AW_Widget.SendJSError("SaveData",t),!1}}}function C4AW_WidgetComms(t){function e(e,a){try{if(0!=n.getSendJSErrors()){var i=window.document,r=i.getElementsByTagName("head").item(0);if(!r)var o=i.getElementById("C4ATBW_DataSendJSErr");o&&r.removeChild(o);var s=i.createElement("script"),c=t.getURLSiteInt()+"ChatWidget/ClientJSError.aspx?AccGUID="+n.getParamAccGUID()+"&WSGUID="+n.getParamWSGUID()+"&Function="+sFunc+"&Err="+sErr,c=c+"&"+Math.random();s.src=c,s.type="text/javascript",s.defer=!0,s.id="C4ATBW_DataSendJSErr",r.appendChild(s)}}catch(t){}}var n=t;this.Send=function(a,i){try{var r=window.document,o=r.getElementsByTagName("head").item(0);if(!o)var s=r.getElementById("C4ATBW_DataSend");s&&o.removeChild(s);var c=r.createElement("script"),d=t.getURLSiteInt()+"ChatWidget/Scripts.aspx?AccGUID="+n.getParamAccGUID()+"&WSGUID="+n.getParamWSGUID()+"&WFGUID="+n.getParamWFGUID(),d=d+"&Process="+a;""!=i&&(d=d+"&"+i),d=d+"&"+Math.random(),c.src=d,c.type="text/javascript",c.defer=!0,c.id="C4ATBW_DataSend",o.appendChild(c)}catch(t){e("SendToServer",t)}},this.SendJSErrorToServer=function(t,n){e(t,n)}}function C4AW_WidgetChat(t){function e(t,e){try{var a=i.getParamWFGUID(),o=i.getParamIdentity();r.LoadData();var s=r.getAutoProactiveWorkflow(),c=r.getAutoProactiveIdentity();n(s)&&(a=s,o=c);var d=i.getURLChatInt(),d=d+t,d=d+"?AccountGUID="+i.getParamAccGUID()+"&WebsiteGUID="+i.getParamWSGUID()+"&WorkflowGUID="+a+"&Identity="+o,d=d+"&R="+Math.random(),u="object"==typeof C4A_TB?C4A_TB.getTHID():"",d=d+"&Origin="+String(escape(location.href)).substring(0,600),d=d+"&Referrer="+String(escape(escape(document.referrer))).substring(0,600),d=d+"&THID="+u,d=d+"&UUID="+e,d=d+"&Widget=Y";""!=i.getParamUserDef()&&(d=d+"&"+i.getParamUserDef());var h=document.getElementById("iFraC4AW");h?h.src=d:alert("OpenChatWindow: unable to find iFraC4AW")}catch(t){oC4AW_Widget.SendJSError("OpenChatWindow",t)}}function n(t){try{var e=/^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$/;return""!=t&&!!e.test(t)}catch(t){oC4AW_Widget.SendJSError("isGUID",t)}}function a(){try{var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})}catch(t){oC4AW_Widget.SendJSError("GenerateUUID",t)}}var i=t,r=new C4AW_Cookie;this.Activate=function(){try{var t="",o="",s=0;if(iFra=document.getElementById("iFraC4AW")){iFra.src=i.getURLSiteInt()+"/ChatWidget/PleaseWait.htm",r.LoadData();var c=new C4AW_UTC;if(0==r.getCookieLoaded()?(t=a(),o=c.UTCGetNow(),s=c.UTCDiffernce(r.getChatStartedDTS()),r.setChatEncryptID(t),r.setChatStartedDTS(o),r.SaveData()):(t=r.getChatEncryptID(),o=r.getChatStartedDTS(),s=c.UTCDiffernce(r.getChatStartedDTS())),!n(t)||36e5<s)t=a(),o=c.UTCGetNow(),r.setChatEncryptID(t),r.setChatStartedDTS(o),r.SaveData(),e("Default.aspx",t);else{var d=new C4AW_WidgetComms(i);n(r.getAutoProactiveWorkflow())?d.Send("ChatInit","UUID="+t+"&ProWFGUID="+r.getAutoProactiveWorkflow()):d.Send("ChatInit","UUID="+t)}}}catch(t){oC4AW_Widget.SendJSError("Activate",t)}},this.ChatActive=function(t){try{e("Widget_Dialogue.aspx",t),r.LoadData();var n=new C4AW_UTC;r.setChatStartedDTS(n.UTCGetNow()),r.SaveData()}catch(t){oC4AW_Widget.SendJSError("ChatActive",t)}},this.ChatCompleted=function(t){try{t=a(),e("Default.aspx",t),r.LoadData(),r.setChatEncryptID(t),new C4AW_UTC,r.setChatStartedDTS(""),r.setChatEncryptID(""),r.SaveData()}catch(t){oC4AW_Widget.SendJSError("ChatCompleted",t)}},this.ChatDontExist=function(t){try{e("Default.aspx",t),r.LoadData(),new C4AW_UTC,r.setChatStartedDTS(""),r.setChatEncryptID(""),r.SaveData()}catch(t){oC4AW_Widget.SendJSError("ChatDontExist",t)}}}function C4AW_WidgetData(){var t="",e="",n="",a="",i="",r="",o="",s="",c=!0,d="",u="",h=[],C="",l="",f="";this.setParamAccGUID=function(e){t=e},this.setParamWSGUID=function(t){e=t},this.setParamWFGUID=function(t){n=t},this.setParamIdentity=function(t){a=t},this.setPopupWindowWFGUID=function(t){i=t},this.setDockPosition=function(t){r=t},this.setBtnStyle=function(t){o=t},this.setBtnStaticURL=function(t){s=t},this.setSendJSErrors=function(t){c=t},this.setContainerStyle=function(t){C=t},this.setContainerHTML=function(t){l=t},this.setIFrameStyle=function(t){f=t},this.setParamUserDef=function(t){d=t},this.setBtnWrapperClass=function(t){u=t},this.addAutoProactive=function(t){h.push(t)},this.getParamAccGUID=function(){return t},this.getParamWSGUID=function(){return e},this.getParamWFGUID=function(){return n},this.getParamIdentity=function(){return a},this.getPopupWindowWFGUID=function(){return i},this.getDockPosition=function(){return r},this.getBtnStyle=function(){return o},this.getSendJSErrors=function(){return c},this.getContainerStyle=function(){return C},this.getContainerHTML=function(){return l},this.getIFrameStyle=function(){return f},this.getParamUserDef=function(){return d},this.getAutoProactiveCollection=function(){return h},this.getBtnWrapperClass=function(){return u},this.getBtnURL=function(){return""==s?"https://prod3si.click4assistance.co.uk//Button/DynamBtn.aspx?AccGUID="+t+"&WSGUID="+e+"&WFGUID="+n:s},this.getURLChatInt=function(){return"https://prod3ci.click4assistance.co.uk/"},this.getURLSiteInt=function(){return"https://prod3si.click4assistance.co.uk/"}}function C4AW_WidgetInterface(t){function e(t,e){oC4AW_Widget.SendJSError(t,e)}function n(){try{c=document.getElementById("divC4AWButton"),c||(c=document.createElement("img"),c.id="divC4AWButton",c.style.zIndex=2147483645,c.style.cssText=C.getBtnStyle(),c.setAttribute("onmouseover","this.style.cursor='pointer';"),c.setAttribute("onmouseout","this.style.cursor='default';"),c.title="Click here to start a chat using Live Chat Software by Click4Assistance",c.setAttribute("alt","Click here to start a chat using Live Chat Software by Click4Assistance"),c.setAttribute("role","button"),c.setAttribute("tabindex","999"),c.onkeypress=function(){o()},c.onclick=function(){o()}),c.src=C.getBtnURL(),""!=C.getBtnWrapperClass()&&(c.style.display="none",c.onload=function(){var t=!1;2==c.height&&2==c.width&&(t=!0);for(var e=document.getElementsByClassName(C.getBtnWrapperClass()),n=0;n<e.length;n++)e[n].style.display=t?"block":"none"}),document.body.insertBefore(c,null)}catch(t){e("BuildChatButton",t)}}function a(){try{if(d){var t=d.style.height.toUpperCase(),n=d.style.width.toUpperCase();"0PX"!=t&&(g=parseInt(t.replace("PX",""),10)),"0PX"!=n&&(W=parseInt(n.replace("PX",""),10)),0==g&&(g=420),0==W&&(g=320),i(!1),D=!0,d.style.display="block",u.style.display="block",c.style.display="none",s(),l.Activate(),h.LoadData(),h.setContDisplayed(!0),h.SaveData()}else alert("InitilizeAndDisplayInterface:Cant find Container")}catch(t){e("InitilizeAndDisplayInterface",t)}}function i(t){h.LoadData(),t?h.getContDisplayed()?d.style.height=parseInt(g,10)+"px":d.style.height="0px":("BOTTOM"==C.getDockPosition()&&(d.style.height="0px"),"RIGHT"==C.getDockPosition()&&(d.style.width="0px"))}function r(){try{var t=C.getURLChatInt()+"Default.aspx?AccountGUID="+C.getParamAccGUID(),t=t+"&WebsiteGUID="+C.getParamWSGUID(),t=t+"&WorkflowGUID="+C.getPopupWindowWFGUID(),t=t+"&Origin="+location.href+"&Referrer="+document.referrer,n="object"==typeof C4A_TB?"&THID="+C4A_TB.getTHID():"&THID=";""!=C.getParamUserDef()&&(t=t+"&"+C.getParamUserDef()),window.open(t+n,"_blank","menubar=no,location=no,resizable=no,scrollbars=auto,status=no")}catch(t){e("PopUpChatWindow",t)}}function o(){try{h.LoadData(),h.setAutoProactiveWorkflow(""),h.setAutoProactiveIdentity(""),h.SaveData(),f.getIsSmallMobile()?r():h.IsEnabled()?p?a():new C4AW_WidgetComms(C).Send("LoadData",""):r()}catch(t){e("OpenInterface",t)}}function s(){try{if(d.style.display="block","BOTTOM"==C.getDockPosition()){var t=d.style.height.toUpperCase(),n=parseInt(t.replace("PX",""),10);parseInt(g,10)>=parseInt(n,10)?(d.style.height=n+10+"px",setTimeout(function(){s()},10)):(u.style.display="block",d.style.width=parseInt(W,10)+"px",d.style.height=parseInt(g,10)+"px")}if("RIGHT"==C.getDockPosition()){var a=d.style.width.toUpperCase(),i=parseInt(a.replace("PX",""),10);parseInt(W,10)>=parseInt(i,10)?(d.style.width=i+10+"px",setTimeout(function(){s()},10)):(u.style.display="block",d.style.width=W+"px",d.style.height=g+"px")}}catch(t){e("Interface_AnimateOpen",t)}}var c,d,u,h=new C4AW_Cookie,C=t,l=new C4AW_WidgetChat(t),f=new C4AW_Browser,g=0,W=0,D=!1,p=!1;this.BuildContainer=function(t,n){try{(d=document.getElementById("divC4AWContainer"))||(d=document.createElement("div"),d.id="divC4AWContainer",d.style.display="none",d.style.cssText=t,d.style.zIndex="2147483647",d.innerHTML=n,document.body.insertBefore(d,null))}catch(t){e("Build_Container",t)}},this.BuildIFrame=function(t){try{(u=document.getElementById("iFraC4AW"))||(u=document.createElement("iframe"),u.id="iFraC4AW",u.style.display="none",u.style.frameBorder="0",u.setAttribute("frameBorder","0"),u.style.marginheight="0px",u.style.marginWidth="0px",u.style.borderWidth="0px",u.style.cssText=t,d.appendChild(u,null))}catch(t){e("Build_IFrame",t)}},this.ServerDataLoaded=function(){try{p=!0,a()}catch(t){e("ServerDataLoaded",t)}},this.ServerDataLoadedForProactive=function(t,e){var n=new C4AW_Cookie;n.LoadData(),n.setAutoProactiveWorkflow(t),n.setAutoProactiveIdentity(e);var i=new Date,i=Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());n.setAutoProactiveDTS(i),n.SaveData(),p=!0,a()},this.Load=function(){n();try{if(h.LoadData(),h.IsEnabled()&&(D=h.getContDisplayed()))try{var t,a=h.getChatEncryptID(),i=(new C4AW_UTC).UTCDiffernce(h.getChatStartedDTS());t:{try{var r=/^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$/;t=""!=a&&!!r.test(a);break t}catch(t){e("isGUID",t)}t=void 0}t&&36e5>i?(p||new C4AW_WidgetComms(C).Send("LoadData",""),l.Activate()):(h.LoadData(),h.getContDisplayed(!1),h.SaveData())}catch(t){e("PageLoad_IsThereActiveChat",t)}}catch(t){e("OpenInterface",t)}},this.CloseBtnClick=function(){try{i(!1),D=!1,c.style.display="block",d.style.display="none",u.style.display="none",h.LoadData(),h.setContDisplayed(!1),h.SaveData()}catch(t){e("CloseInterface",t)}},this.PopUpChatWindow=function(){r()}}function C4AWJSLoaded(t,e){oC4AW_Widget=new oC4AW_Widget,oC4AW_Widget.setAccGUID("CD44000A-B9CB-4689-BCDD-0A909F0F65CA"),oC4AW_Widget.setWSGUID("680c6c21-116b-46ba-b44b-4ef5a76f97a8"),oC4AW_Widget.setWFGUID(t),oC4AW_Widget.setPopupWindowWFGUID(e),oC4AW_Widget.setDockPosition("BOTTOM"),oC4AW_Widget.setBtnStyle("position:fixed; border:none; bottom:0em; right:1em; z-index:9999;"),oC4AW_Widget.setIdentity("Embedded Chat"),oC4AW_Widget.Initilize()}var oC4AW_Widget=C4AW_Widget;C4AWJSLoaded("72567145-0dcd-4dd1-a927-af554e856d55","8f5fa28a-0321-466c-bf5d-422f65d086b1");